# Resumo da Aula Prática sobre LGPD e Minimização por Design (Parte 2)

## Introdução
Nesta segunda parte da aula prática sobre minimização por design, o professor aprofunda a aplicação desse princípio da Lei Geral de Proteção de Dados (LGPD), focando no **particionamento vertical** para separar dados sensíveis e reduzir a exposição. Usando o ambiente Docker e PostgreSQL criado anteriormente, a aula demonstra a criação de uma tabela de contatos, testes de inserção de dados e a validação de domínios, reforçando os princípios de **necessidade**, **qualidade de dados** e **finalidade**.

## Revisão: Minimização por Design e Overcollection
O professor relembra que a **minimização por design** visa coletar apenas os dados necessários, reduzindo riscos à privacidade, custos de compliance e sanções legais. A **overcollection** (coleta excessiva) aumenta a exposição do titular e as responsabilidades da organização. Na aula anterior, a criação de domínios (`uf_br` e `telefone_br`) ajudou a evitar inconsistências e limitar dados desnecessários, alinhando-se aos objetivos da LGPD:
- Proteção dos direitos fundamentais, como a privacidade.
- Segurança jurídica com regras claras e auditáveis.
- Ambiente de negócios saudável com menor risco e custo.

## Particionamento Vertical
O foco principal da aula é o **particionamento vertical**, que consiste em separar dados em tabelas distintas para reduzir a exposição. Por exemplo:
- A tabela `pessoas` contém dados básicos (nome, CPF, e-mail, data de nascimento).
- Uma nova tabela `contatos` armazena dados opcionais (telefone, cidade, estado).
Essa separação permite:
- **Controle de acesso**: Cada setor (ex.: financeiro) acessa apenas os dados necessários, alinhado ao princípio da **necessidade**.
- **Menor superfície de risco**: Menos dados em uma única tabela reduzem o impacto de vazamentos.
- **Clareza na auditoria**: Facilita justificar a finalidade de cada tabela para a Autoridade Nacional de Proteção de Dados (ANPD) ou clientes.

## Criação da Tabela de Contatos
O professor cria a tabela `contatos` no esquema `privado` do banco `lgpd_lab`:
- **Campos**:
  - `pessoa_id`: Chave primária e estrangeira, vinculada ao `id` da tabela `pessoas`, com `ON DELETE CASCADE` para exclusão automática.
  - `telefone`: Usa o domínio `telefone_br`, opcional (sem `NOT NULL`).
  - `cidade`: Tipo `TEXT`, opcional.
  - `estado`: Usa o domínio `uf_br`, opcional.
- **Finalidade**: Armazenar apenas dados de contato estritamente necessários, reforçando a minimização por design.
- **Documentação**: Um comentário é adicionado à tabela: "Armazenar dados de contato estritamente necessários ao processo, protegendo direitos como a privacidade, garantindo segurança jurídica e favorecendo o ambiente de negócios."
Essa estrutura evita a coleta de dados desnecessários e permite que campos opcionais permaneçam nulos quando não exigidos pela regra de negócio.

## Testes de Inserção e Validação
O professor realiza testes práticos:
- **Inserção na tabela `pessoas`**:
  - Dados: Nome ("Ana"), CPF (exemplo: "231..."), e-mail, data de nascimento ("2003-01-01").
  - Retorna o `id` gerado para uso posterior.
- **Inserção na tabela `contatos`**:
  - Vincula o `pessoa_id` ao ID de "Ana", adicionando estado (ex.: "SP") e telefone.
  - Teste de falha: Tenta inserir um estado inválido ("XX"), mas o domínio `uf_br` bloqueia a operação, exibindo a mensagem de erro: "VALUE FOR DOMAIN UFBR VIOLATES CHECK CONSTRAINT".
A validação automática pelo domínio reforça a **qualidade de dados**, prevenindo erros e dados inválidos na entrada.

## Benefícios da Ab LGBTQ
A separação dos dados em tabelas distintas e a validação por domínios proporcionam:
- **Proteção da privacidade**: Menos dados expostos em consultas desnecessárias.
- **Segurança jurídica**: Regras claras e documentadas facilitam auditorias.
- **Redução de riscos**: Menor coleta de dados simplifica compliance e reduz custos.
- **Qualidade de dados**: Domínios garantem consistência e previnem erros.

## Visualização da Estrutura
O professor verifica a estrutura criada:
- `\dt privado.*`: Confirma a existência das tabelas `pessoas` e `contatos`.
- `\d privado.contatos`: Exibe os detalhes da tabela `contatos`, mostrando que os campos `telefone`, `cidade` e `estado` são opcionais, reforçando a minimização.

## Conclusão
A aula consolidou a aplicação da **minimização por design** por meio do **particionamento vertical**, separando dados de contato em uma tabela própria para reduzir exposição e alinhar-se ao princípio da **necessidade**. A criação da tabela `contatos`, com campos opcionais e validação por domínios, demonstrou como evitar **overcollection**, garantir **qualidade de dados** e documentar a **finalidade** do tratamento. Testes práticos ilustraram a eficácia das validações, protegendo a privacidade e facilitando a conformidade com a LGPD. A próxima aula continuará explorando princípios da LGPD e sua implementação técnica, incentivando os alunos a praticarem os conceitos apresentados.